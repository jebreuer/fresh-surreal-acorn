args: revision: "$(git rev-parse HEAD)"

containers: fresh: {
    build: {
        context: "."
        dockerfile: "./Dockerfile"
        buildArgs: {
            "REVISION": args.revision
        }
    }
    
    if args.dev {
        cmd: #"run -A --watch=static/,routes/ main.ts"#
        dirs: "/app": "./"
    }

    ports: publish: "8000/http"
}