containers: fresh: {
    build: {
        context: "."
        dockerfile: "./Dockerfile"
        buildArgs: {
            "REVISION": "secret://revision/token"
        }
    }
    
    if args.dev {
        cmd: #"run -A --watch=static/,routes/ main.ts"#
        dirs: "/app": "./"
    }

    ports: publish: "8000/http"
}

secrets: {
    "revision": {
        type: "token"
        params: {
            length: 12
            characters: "abcdedfghijklmnopqrstuvwxyz0123456789"
        }
    }
}